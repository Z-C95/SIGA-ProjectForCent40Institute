{% extends "layouts/base_admin.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<!-- Título + contexto -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="h4 mb-1">Panel principal — Administración</h1>
    <p class="text-muted mb-0">
      Resumen general del módulo de asistencias del sistema SIGA.
    </p>
  </div>
</div>

<!-- Mensajes (éxito / error) -->
{% if messages %}
  <div class="mb-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} mb-2" role="alert">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<!-- KPIs principales -->
<div class="row g-3 mb-4">
  <!-- Total alumnos -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body d-flex flex-column justify-content-between">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted text-uppercase small">Alumnos</span>
          <i class="bi bi-people-fill fs-3 text-primary"></i>
        </div>
        <div>
          <h2 class="display-6 mb-0">{{ total_alumnos }}</h2>
          <small class="text-muted">Registrados en el sistema</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Total docentes -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body d-flex flex-column justify-content-between">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted text-uppercase small">Docentes</span>
          <i class="bi bi-person-badge-fill fs-3 text-success"></i>
        </div>
        <div>
          <h2 class="display-6 mb-0">{{ total_docentes }}</h2>
          <small class="text-muted">Docentes activos</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Total materias -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body d-flex flex-column justify-content-between">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted text-uppercase small">Materias</span>
          <i class="bi bi-journal-text fs-3 text-warning"></i>
        </div>
        <div>
          <h2 class="display-6 mb-0">{{ total_materias }}</h2>
          <small class="text-muted">Materias registradas</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Total registros de asistencia -->
  <div class="col-12 col-sm-6 col-lg-3">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body d-flex flex-column justify-content-between">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted text-uppercase small">Asistencias</span>
          <i class="bi bi-clipboard-check fs-3 text-danger"></i>
        </div>
        <div>
          <h2 class="display-6 mb-0">{{ total_asistencias }}</h2>
          <small class="text-muted">Registros de asistencia acumulados</small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Accesos rápidos (coherentes con el panel lateral) -->
<div class="card shadow-sm border-0 mb-4">
  <div class="card-body">
    <h2 class="h5 mb-3">Accesos rápidos</h2>
    <p class="text-muted small mb-3">
      Desde este panel el administrativo puede acceder rápidamente a las funciones principales del módulo de asistencias.
    </p>

    <div class="row g-3">
      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:usuarios_lista' %}" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-people me-2"></i> Gestionar usuarios</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:carreras_lista' %}" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-mortarboard me-2"></i> Gestionar carreras</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:materias_lista' %}" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-journal-text me-2"></i> Gestionar materias</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:admin_cursadas' %}" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-people-fill me-2"></i> Asignar docentes e inscribir alumnos</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:reportes_curso' %}" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-graph-up me-2"></i> Reportes de asistencia</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-12 col-md-6 col-lg-4">
        <a href="{% url 'asistencias:lista_justificativos' %}" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-between">
          <span><i class="bi bi-file-earmark-text me-2"></i> Gestión de justificativos</span>
          <i class="bi bi-chevron-right"></i>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Bloque descriptivo (útil para la tesina) -->
<div class="card shadow-sm border-0">
  <div class="card-body">
    <h2 class="h5 mb-3">Descripción del panel</h2>
    <p class="mb-1">
      Este panel de control resume la información principal del módulo de asistencias del sistema SIGA. 
      En la parte superior se muestran indicadores clave (cantidad de alumnos, docentes, materias y registros 
      de asistencia), mientras que en la sección de accesos rápidos se concentran las acciones más frecuentes 
      que realiza el rol administrativo.
    </p>
  </div>
</div>

{% endblock %}
